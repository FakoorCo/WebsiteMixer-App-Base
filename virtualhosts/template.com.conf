<VirtualHost *:80>
    ServerName [domain]
    ServerAlias www.[domain]
    Redirect permanent / https://[domain]/
</VirtualHost>

<VirtualHost *:443>
    ServerName [domain]
    ServerAlias www.[domain]
    DocumentRoot /var/www

    WSGIDaemonProcess api[appname] user=www-data group=www-data threads=5
    WSGIScriptAlias / /srv/[domain]/api.wsgi
    WSGIPassAuthorization On

    <Directory /var/www>
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /srv/[domain]>
        WSGIProcessGroup apimacapp
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Order deny,allow
        Allow from all

        ExpiresActive On
        #ExpiresByType text/css   "now plus 7 days"
        ExpiresDefault "access plus 1 month"

        <FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
        Header set Cache-Control "max-age=1296000, public"
        </FilesMatch>
	Require all granted
    </Directory>

    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/[domain]-ssl-access.log combined
    ErrorLog ${APACHE_LOG_DIR}/[domain]-ssl-error.log

    SSLEngine on
    SSLProtocol all -SSLv3 -SSLv2
    #SSLCipherSuite DEFAULT:!ADH:!EXPORT40:!EXP:!LOW:!RC4:!SSLv3:!SSLv2

    SSLCertificateFile      /etc/apache2/ssl/[domain].crt
    SSLCertificateKeyFile   /etc/apache2/ssl/[domain].key
    #SSLCertificateChainFile /etc/apache2/ssl/[domain].chain.crt
</VirtualHost>

